<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love Pulse - Advanced Relationship Analyzer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Enhanced Light Theme Colors */
            --valentine-pink: #ff4d6d;
            --valentine-red: #e91e63;
            --valentine-light: #fff0f6;
            --valentine-lighter: #fff9fb;
            --valentine-dark: #c9184a;
            --valentine-purple: #c71585;
            --bg-color: #fff9fb;
            --text-color: #333344;
            --card-bg: white;
            --shadow-color: rgba(255, 107, 139, 0.2);
            --border-color: #ffb3c6;
            --soft-pink: #ffd6e0;
            --bright-pink: #ff8fab;
        }

        .dark-mode {
            /* Your existing awesome dark theme */
            --bg-color: #1a001a;
            --text-color: #ffebf0;
            --card-bg: #330033;
            --shadow-color: rgba(100, 0, 50, 0.5);
            --border-color: #ff4d88;
            --valentine-pink: #ff4d88;
            --valentine-red: #ff1a75;
            --valentine-purple: #e84393;
            --valentine-light: #330033;
            --valentine-dark: #ff80b3;
            --valentine-lighter: #3d003d;
            --soft-pink: #4d0033;
            --bright-pink: #ff66b3;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--bg-color);
            background-image: url('https://www.transparenttextures.com/patterns/light-honeycomb.png');
            color: var(--text-color);
            transition: all 0.5s ease;
            min-height: 100vh;
            padding-bottom: 50px;
        }

        body.dark-mode {
            background-image: url('https://www.transparenttextures.com/patterns/dark-honeycomb.png');
        }
        
        .valentine-header {
            font-family: 'Dancing Script', cursive;
            color: var(--valentine-red);
            text-shadow: 2px 2px 4px rgba(233, 30, 99, 0.2);
            position: relative;
            background: linear-gradient(135deg, var(--valentine-pink), var(--valentine-red));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: inline-block;
        }
        
        .valentine-header:after {
            content: "‚ù§";
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
            animation: heartbeat 1.5s infinite;
            background: none;
            -webkit-text-fill-color: initial;
        }
        
        @keyframes heartbeat {
            0% { transform: translateY(-50%) scale(1); }
            25% { transform: translateY(-50%) scale(1.1); }
            50% { transform: translateY(-50%) scale(1); }
            75% { transform: translateY(-50%) scale(1.1); }
            100% { transform: translateY(-50%) scale(1); }
        }
        
        .btn-valentine {
            background: linear-gradient(to right, var(--valentine-pink), var(--valentine-red));
            color: white;
            border: none;
            border-radius: 50px;
            padding: 12px 30px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px var(--shadow-color);
            position: relative;
            overflow: hidden;
        }
        
        .btn-valentine:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px var(--shadow-color);
            color: white;
        }

        .btn-valentine:after {
            content: "";
            position: absolute;
            top: -50%;
            right: -50%;
            bottom: -50%;
            left: -50%;
            background: linear-gradient(to bottom, rgba(255,255,255,0.3), rgba(255,255,255,0));
            transform: rotateZ(60deg) translate(-5em, 7.5em);
        }
        
        .btn-valentine:hover:after {
            animation: sheen 1.5s forwards;
        }
        
        @keyframes sheen {
            100% {
                transform: rotateZ(60deg) translate(1em, -9em);
            }
        }

        .btn-lovemeter {
            background: linear-gradient(to right, var(--valentine-purple), var(--valentine-pink));
            color: white;
            border: none;
            border-radius: 50px;
            padding: 12px 30px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px var(--shadow-color);
        }
        
        .btn-lovemeter:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px var(--shadow-color);
            color: white;
        }
        
        .quiz-container {
            background-color: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 10px 30px var(--shadow-color);
            padding: 30px;
            border: 2px solid var(--border-color);
            position: relative;
            overflow: hidden;
            background: linear-gradient(145deg, var(--card-bg), var(--valentine-lighter));
        }
        
        .quiz-container:before {
            content: "";
            position: absolute;
            top: -50px;
            right: -50px;
            width: 150px;
            height: 150px;
            background-color: rgba(255, 214, 221, 0.3);
            border-radius: 50%;
            filter: blur(20px);
        }
        
        .quiz-container:after {
            content: "";
            position: absolute;
            bottom: -30px;
            left: -30px;
            width: 100px;
            height: 100px;
            background-color: rgba(255, 214, 221, 0.3);
            border-radius: 50%;
            filter: blur(20px);
        }
        
        .question-card {
            background-color: var(--card-bg);
            border-radius: 15px;
            border: none;
            box-shadow: 0 5px 15px var(--shadow-color);
            transition: all 0.3s;
            overflow: hidden;
            margin-bottom: 20px;
            border-left: 5px solid var(--valentine-pink);
            background: linear-gradient(145deg, var(--card-bg), var(--valentine-lighter));
        }
        
        .question-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px var(--shadow-color);
        }
        
        .question-card .card-header {
            background: linear-gradient(to right, var(--valentine-pink), var(--valentine-red));
            color: white;
            font-weight: 600;
            border-bottom: none;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .option-btn {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            text-align: left;
            padding: 12px 20px;
            margin-bottom: 10px;
            border-radius: 10px;
            transition: all 0.3s;
            width: 100%;
        }
        
        .option-btn:hover {
            background-color: rgba(255, 107, 139, 0.1);
            border-color: var(--valentine-red);
            transform: translateX(5px);
        }
        
        .option-btn.selected {
            background: linear-gradient(to right, var(--valentine-pink), var(--valentine-red));
            color: white;
            border-color: var(--valentine-red);
            box-shadow: 0 4px 8px var(--shadow-color);
        }
        
        .yesno-btn {
            min-width: 100px;
            margin: 5px;
            border: 2px solid var(--border-color);
            font-weight: 600;
            transition: all 0.3s;
            padding: 10px 20px;
            border-radius: 50px;
        }
        
        .yesno-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px var(--shadow-color);
        }
        
        .yes-btn {
            background-color: rgba(255, 107, 139, 0.1);
            color: var(--text-color);
        }
        
        .no-btn {
            background-color: rgba(255, 107, 139, 0.1);
            color: var(--text-color);
        }
        
        .yes-btn.selected {
            background: linear-gradient(to right, var(--valentine-pink), var(--bright-pink));
            color: white;
            border-color: var(--valentine-red);
        }
        
        .no-btn.selected {
            background: linear-gradient(to right, var(--valentine-dark), var(--valentine-red));
            color: white;
            border-color: var(--valentine-red);
        }
        
        .result-container {
            display: none;
            background-color: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 10px 30px var(--shadow-color);
            padding: 30px;
            border: 2px solid var(--border-color);
            position: relative;
            overflow: hidden;
            animation: fadeIn 1s ease-out;
            background: linear-gradient(145deg, var(--card-bg), var(--valentine-lighter));
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .result-title {
            font-family: 'Dancing Script', cursive;
            color: var(--valentine-red);
            text-align: center;
            margin-bottom: 20px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(233, 30, 99, 0.2);
        }
        
        .result-description {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 30px;
            color: var(--text-color);
        }
        
        .result-score {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--valentine-red);
            margin-bottom: 20px;
        }
        
        .result-conclusion {
            font-size: 1.2rem;
            font-weight: 600;
            padding: 15px;
            border-radius: 10px;
            background-color: rgba(255, 214, 221, 0.3);
            margin-bottom: 20px;
            text-align: center;
            border-left: 4px solid var(--valentine-red);
        }
        
        .heart-decoration {
            position: absolute;
            color: var(--valentine-pink);
            opacity: 0.3;
            font-size: 1.5rem;
            z-index: 0;
        }
        
        .heart-1 { top: 10%; left: 5%; animation: float 6s ease-in-out infinite; }
        .heart-2 { top: 70%; right: 10%; animation: float 8s ease-in-out infinite 2s; }
        .heart-3 { top: 30%; right: 15%; animation: float 5s ease-in-out infinite 1s; }
        
        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }
        
        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .heart {
            position: absolute;
            opacity: 0;
            animation: falling-hearts 10s linear infinite;
        }
        
        @keyframes falling-hearts {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(calc(100vh + 100px)) rotate(360deg);
                opacity: 0;
            }
        }
        
        .theme-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .watermark {
            position: fixed;
            bottom: 10px;
            right: 10px;
            font-size: 12px;
            color: var(--valentine-pink);
            opacity: 0.7;
            z-index: 1000;
        }

        .romantic-cursor {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            animation: float 3s ease-in-out infinite;
        }

        /* Result animations */
        .true-love-animation {
            background: radial-gradient(circle, rgba(255,214,221,0.3) 0%, rgba(255,107,139,0.1) 70%, rgba(255,255,255,0) 100%);
            animation: pulse 2s infinite alternate;
        }

        .affection-animation {
            background: radial-gradient(circle, rgba(255,236,179,0.3) 0%, rgba(255,193,7,0.1) 70%, rgba(255,255,255,0) 100%);
            animation: gentlePulse 3s infinite alternate;
        }

        .infatuation-animation {
            background: radial-gradient(circle, rgba(255,179,236,0.3) 0%, rgba(233,30,99,0.1) 70%, rgba(255,255,255,0) 100%);
            animation: quickPulse 1.5s infinite alternate;
        }

        .friendship-animation {
            background: radial-gradient(circle, rgba(179,229,255,0.3) 0%, rgba(30,136,233,0.1) 70%, rgba(255,255,255,0) 100%);
            animation: slowPulse 4s infinite alternate;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.02); }
        }

        @keyframes gentlePulse {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(1.01); opacity: 1; }
        }

        @keyframes quickPulse {
            0% { transform: scale(1); background-position: 30% 30%; }
            100% { transform: scale(1.03); background-position: 70% 70%; }
        }

        @keyframes slowPulse {
            0% { transform: scale(1); opacity: 0.9; }
            100% { transform: scale(1.01); opacity: 1; }
        }

        .progress-container {
            height: 20px;
            background-color: rgba(255,214,221,0.3);
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }

        .progress-bar {
            height: 100%;
            border-radius: 10px;
            transition: width 1s ease-in-out;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .true-love-progress {
            background: linear-gradient(to right, var(--valentine-pink), var(--valentine-red));
        }

        .affection-progress {
            background: linear-gradient(to right, var(--bright-pink), var(--valentine-pink));
        }

        .infatuation-progress {
            background: linear-gradient(to right, var(--valentine-purple), var(--valentine-pink));
        }

        .friendship-progress {
            background: linear-gradient(to right, #a18cd1, #fbc2eb);
        }

        /* Enhanced light theme elements */
        .quiz-container, .question-card, .result-container {
            backdrop-filter: blur(5px);
        }

        .option-btn, .yesno-btn {
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .btn-valentine, .btn-lovemeter {
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .btn-valentine:before, .btn-lovemeter:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(rgba(255,255,255,0.3), rgba(255,255,255,0));
            opacity: 0;
            transition: opacity 0.3s;
            z-index: -1;
        }

        .btn-valentine:hover:before, .btn-lovemeter:hover:before {
            opacity: 1;
        }
    </style>
</head>
<body>
    <!-- Theme Switcher -->
    <div class="theme-switcher">
        <button id="themeToggle" class="btn btn-sm btn-valentine">
            üåô Dark Mode
        </button>
    </div>

    <!-- Watermark -->
    <div class="watermark">Created with ‚ù§ by Aromal BS</div>

    <!-- Floating Hearts Background -->
    <div class="floating-hearts" id="floatingHearts"></div>

    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="text-center mb-5">
                    <h1 class="valentine-header display-3 mb-3">Love Pulse</h1>
                    <p class="lead" style="color: var(--valentine-dark);">Advanced Relationship Analyzer</p>
                </div>
                
                <!-- Heart Decorations -->
                <div class="heart-decoration heart-1">‚ù§</div>
                <div class="heart-decoration heart-2">‚ù§</div>
                <div class="heart-decoration heart-3">‚ù§</div>
                
                <!-- Quiz Container -->
                <div class="quiz-container position-relative" id="quizContainer">
                    <h3 class="text-center mb-4" style="color: var(--valentine-red);">Answer Honestly to Reveal Your True Feelings</h3>
                    
                    <div id="questionContainer">
                        <!-- Questions will be inserted here by JavaScript -->
                    </div>
                    
                    <div class="d-flex justify-content-between mt-4">
                        <button class="btn btn-valentine" id="prevBtn" disabled>Previous</button>
                        <span id="questionCounter">Question 1 of 15</span>
                        <button class="btn btn-valentine" id="nextBtn">Next</button>
                    </div>
                </div>
                
                <!-- Results Container -->
                <div class="result-container position-relative" id="resultContainer">
                    <div class="text-center">
                        <div class="result-title" id="resultTitle">Your Relationship Type</div>
                        <div class="result-conclusion" id="resultConclusion"></div>
                        <div class="progress-container">
                            <div class="progress-bar" id="resultProgress" style="width: 0%"></div>
                        </div>
                        <div class="result-score" id="resultScore"></div>
                        <div class="result-description" id="resultDescription"></div>
                        <button class="btn btn-lovemeter" id="restartBtn">Take Test Again</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Multiple-choice questions
        const mcQuestions = [
            {
                question: "What makes you happiest about this person?",
                options: [
                    "A) The way we connect emotionally.",
                    "B) The excitement and butterflies they give me.",
                    "C) The comfort of having them in my life.",
                    "D) The way they look at me."
                ],
                scores: { A: 3, B: 1, C: 2, D: 0 } // 3=true love, 2=affection, 1=infatuation, 0=friendship
            },
            {
                question: "How often do you think about them?",
                options: [
                    "A) They are always on my mind in a peaceful way.",
                    "B) Only when I see them or something reminds me of them.",
                    "C) All the time, even when I shouldn't.",
                    "D) Mostly when I feel lonely or bored."
                ],
                scores: { A: 3, B: 0, C: 1, D: 2 }
            },
            {
                question: "If they gained weight or lost their looks, how would you feel?",
                options: [
                    "A) I would still love them the same.",
                    "B) It wouldn't matter; their presence means more to me.",
                    "C) I might feel less attracted.",
                    "D) I would try to accept it, but it might bother me."
                ],
                scores: { A: 3, B: 2, C: 0, D: 1 }
            },
            {
                question: "How do you feel about sharing personal secrets with them?",
                options: [
                    "A) I feel comfortable sharing everything.",
                    "B) I mostly talk to them for fun, not deep things.",
                    "C) I share a little, but not too much.",
                    "D) I'm excited to impress them but hesitate to be vulnerable."
                ],
                scores: { A: 3, B: 0, C: 2, D: 1 }
            },
            {
                question: "What is your strongest desire in this relationship?",
                options: [
                    "A) To enjoy their company with no expectations.",
                    "B) To experience passion and thrill.",
                    "C) To build a future together.",
                    "D) To be physically close to them."
                ],
                scores: { A: 0, B: 1, C: 3, D: 2 }
            },
            {
                question: "How do you react when they don't text or call for a while?",
                options: [
                    "A) I feel sad but understand they might be busy.",
                    "B) I barely notice unless I need something from them.",
                    "C) I get anxious and worry they are losing interest.",
                    "D) I get frustrated and lose interest myself."
                ],
                scores: { A: 3, B: 0, C: 1, D: 2 }
            },
            {
                question: "If they had to move far away, what would you do?",
                options: [
                    "A) I wouldn't care much since I like them only when they're around.",
                    "B) I might move on quickly.",
                    "C) I would make the relationship work no matter what.",
                    "D) I'd be sad but would try for a while."
                ],
                scores: { A: 0, B: 1, C: 3, D: 2 }
            },
            {
                question: "How do you feel about their personality?",
                options: [
                    "A) Their personality isn't a big factor, I just enjoy their presence.",
                    "B) I love them even with their flaws.",
                    "C) I like some parts but ignore the things I dislike.",
                    "D) I wish they would change certain things about themselves."
                ],
                scores: { A: 0, B: 3, C: 2, D: 1 }
            },
            {
                question: "If you could never have physical intimacy with them, how would you feel?",
                options: [
                    "A) I would still cherish and love them deeply.",
                    "B) I would likely lose interest over time.",
                    "C) It would be difficult, but I'd try to make it work.",
                    "D) It wouldn't affect me much since I enjoy their company in other ways."
                ],
                scores: { A: 3, B: 1, C: 2, D: 0 }
            },
            {
                question: "When you imagine a future with them, what do you see?",
                options: [
                    "A) I don't really think about the future.",
                    "B) Some future possibilities, but I mostly focus on now.",
                    "C) A stable life together filled with love and growth.",
                    "D) Exciting and passionate moments, but nothing long-term."
                ],
                scores: { A: 0, B: 2, C: 3, D: 1 }
            }
        ];

        // Yes/No questions
        const ynQuestions = [
            {
                question: "Do you think about them even when they're not around?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "Would you be willing to sacrifice something important for their happiness?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "Do you feel emotionally safe and understood with them?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "Do you admire them for who they are, not just how they look?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "If they couldn't be with you romantically, would you still want them in your life?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "Do you feel comfortable being your true self around them?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "Have you imagined a future with them beyond just romantic moments?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "If they were struggling, would you stay and support them without expecting anything in return?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "Does their happiness matter more to you than your own desires?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "Can you accept their flaws and still love them unconditionally?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "Do you trust them deeply and believe in their loyalty?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "If physical attraction was removed, would you still feel the same way about them?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "Do you feel a strong emotional connection beyond just excitement or obsession?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "Can you see yourself with them even during difficult times?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "Do you respect their individuality and personal growth?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "Would you be patient with them even if things got tough?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "Do you prioritize their needs and feelings alongside your own?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "Have you thought about how you both can grow together emotionally?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "Would you choose to stay with them even if the passion faded?",
                scores: { Y: 3, N: 0 }
            },
            {
                question: "Do you feel deep care and concern for them without needing anything in return?",
                scores: { Y: 3, N: 0 }
            }
        ];

        // Result descriptions
        const resultDescriptions = {
            "true-love": {
                title: "True Love ‚ù§Ô∏è",
                description: "Your feelings represent true love - deep, unconditional, and enduring. You value emotional connection and accept your partner completely. This is the foundation for lasting relationships. Cherish this bond and continue nurturing it with open communication and mutual respect.",
                conclusion: "You are most probably experiencing True Love according to your answers.",
                animation: "true-love-animation"
            },
            "affection": {
                title: "Affection üíù",
                description: "You have strong affectionate feelings that are warm and caring. While not as intense as true love, this is a stable and comforting connection. Affection can grow into deeper love over time with shared experiences and emotional intimacy.",
                conclusion: "Your answers suggest you're experiencing Affection, which could develop into deeper love.",
                animation: "affection-animation"
            },
            "infatuation": {
                title: "Infatuation üíò",
                description: "Your feelings are passionate and intense, but may be based more on physical attraction or idealization. Infatuation is exciting but often temporary. Consider whether these feelings could develop into something deeper with time and shared values.",
                conclusion: "Based on your answers, you're likely experiencing Infatuation.",
                animation: "infatuation-animation"
            },
            "friendship": {
                title: "Friendship ü§ù",
                description: "Your connection is more platonic than romantic. You enjoy each other's company but may lack deeper emotional or physical attraction. Friendship is valuable - whether it remains as is or potentially grows into something more.",
                conclusion: "Your responses indicate you're experiencing Friendship rather than romantic love.",
                animation: "friendship-animation"
            }
        };

        // Variables
        let currentQuestion = 0;
        let answers = [];
        let currentTheme = 'light';
        let selectedQuestions = [];

        // DOM Elements
        const quizContainer = document.getElementById('quizContainer');
        const questionContainer = document.getElementById('questionContainer');
        const resultContainer = document.getElementById('resultContainer');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const questionCounter = document.getElementById('questionCounter');
        const restartBtn = document.getElementById('restartBtn');
        const resultTitle = document.getElementById('resultTitle');
        const resultDescription = document.getElementById('resultDescription');
        const resultScore = document.getElementById('resultScore');
        const resultProgress = document.getElementById('resultProgress');
        const resultConclusion = document.getElementById('resultConclusion');
        const themeToggle = document.getElementById('themeToggle');

        // Initialize quiz with random questions
        function initQuiz() {
            // Combine and shuffle questions
            const allQuestions = [...mcQuestions, ...ynQuestions];
            selectedQuestions = shuffleArray(allQuestions).slice(0, 15);
            
            answers = Array(selectedQuestions.length).fill(null);
            currentQuestion = 0;
            showQuestion();
            quizContainer.style.display = 'block';
            resultContainer.style.display = 'none';
        }

        // Shuffle array
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // Show current question
        function showQuestion() {
            questionCounter.textContent = `Question ${currentQuestion + 1} of ${selectedQuestions.length}`;
            
            const question = selectedQuestions[currentQuestion];
            let html = `
                <div class="question-card">
                    <div class="card-header">${question.question}</div>
                    <div class="card-body">
                        <div class="options-container">
            `;
            
            if (question.options) {
                // Multiple-choice question
                question.options.forEach((option, index) => {
                    const isSelected = answers[currentQuestion] === index;
                    html += `
                        <button class="option-btn ${isSelected ? 'selected' : ''}" data-index="${index}">
                            ${option}
                        </button>
                    `;
                });
            } else {
                // Yes/No question
                html += `
                    <div class="d-flex justify-content-center">
                        <button class="btn yesno-btn yes-btn ${answers[currentQuestion] === 'Y' ? 'selected' : ''}" data-answer="Y">Yes</button>
                        <button class="btn yesno-btn no-btn ${answers[currentQuestion] === 'N' ? 'selected' : ''}" data-answer="N">No</button>
                    </div>
                `;
            }
            
            html += `
                        </div>
                    </div>
                </div>
            `;
            
            questionContainer.innerHTML = html;
            
            // Add event listeners to options
            if (question.options) {
                document.querySelectorAll('.option-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        selectOption(this);
                    });
                });
            } else {
                document.querySelectorAll('.yesno-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        selectYesNo(this);
                    });
                });
            }
            
            // Update button states
            prevBtn.disabled = currentQuestion === 0;
            nextBtn.textContent = currentQuestion === selectedQuestions.length - 1 ? 'See Results' : 'Next';
        }

        // Select an option for multiple-choice
        function selectOption(optionBtn) {
            const selectedIndex = parseInt(optionBtn.dataset.index);
            answers[currentQuestion] = selectedIndex;
            
            // Update UI
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            optionBtn.classList.add('selected');
        }

        // Select Yes/No answer
        function selectYesNo(button) {
            const answer = button.dataset.answer;
            answers[currentQuestion] = answer;
            
            // Update UI
            document.querySelectorAll('.yesno-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            button.classList.add('selected');
        }

        // Calculate results
        function calculateResults() {
            let trueLoveScore = 0;
            let affectionScore = 0;
            let infatuationScore = 0;
            let friendshipScore = 0;
            let totalPossible = 0;
            
            selectedQuestions.forEach((question, index) => {
                if (answers[index] !== null) {
                    if (question.options) {
                        // Multiple-choice question
                        const selectedOption = question.options[answers[index]].charAt(0);
                        const scoreValue = question.scores[selectedOption];
                        
                        if (scoreValue === 3) trueLoveScore++;
                        else if (scoreValue === 2) affectionScore++;
                        else if (scoreValue === 1) infatuationScore++;
                        else friendshipScore++;
                        
                        totalPossible += 3;
                    } else {
                        // Yes/No question
                        const answer = answers[index];
                        const scoreValue = question.scores[answer];
                        
                        trueLoveScore += scoreValue;
                        totalPossible += 3;
                    }
                }
            });
            
            // Convert to percentages
            const trueLovePercent = Math.round((trueLoveScore / totalPossible) * 100);
            const affectionPercent = Math.round((affectionScore / selectedQuestions.length) * 100);
            const infatuationPercent = Math.round((infatuationScore / selectedQuestions.length) * 100);
            const friendshipPercent = Math.round((friendshipScore / selectedQuestions.length) * 100);
            
            return {
                trueLoveScore: trueLovePercent,
                affectionScore: affectionPercent,
                infatuationScore: infatuationPercent,
                friendshipScore: friendshipPercent
            };
        }

        // Show results
        function showResults() {
            const results = calculateResults();
            let resultType = '';
            let highestScore = 0;
            
            // Determine primary result type
            if (results.trueLoveScore > highestScore) {
                highestScore = results.trueLoveScore;
                resultType = 'true-love';
            }
            if (results.affectionScore > highestScore) {
                highestScore = results.affectionScore;
                resultType = 'affection';
            }
            if (results.infatuationScore > highestScore) {
                highestScore = results.infatuationScore;
                resultType = 'infatuation';
            }
            if (results.friendshipScore > highestScore) {
                highestScore = results.friendshipScore;
                resultType = 'friendship';
            }
            
            // Display results
            quizContainer.style.display = 'none';
            resultContainer.style.display = 'block';
            
            const result = resultDescriptions[resultType];
            resultTitle.textContent = result.title;
            resultDescription.textContent = result.description;
            resultConclusion.textContent = result.conclusion;
            
            // Set animation class
            resultContainer.className = 'result-container position-relative';
            resultContainer.classList.add(result.animation);
            
            // Show score breakdown
            resultScore.innerHTML = `
                <div>True Love: ${results.trueLoveScore}%</div>
                <div>Affection: ${results.affectionScore}%</div>
                <div>Infatuation: ${results.infatuationScore}%</div>
                <div>Friendship: ${results.friendshipScore}%</div>
            `;
            
            // Animate progress bar
            setTimeout(() => {
                let progressClass = '';
                if (resultType === 'true-love') {
                    progressClass = 'true-love-progress';
                    resultProgress.style.width = `${results.trueLoveScore}%`;
                } else if (resultType === 'affection') {
                    progressClass = 'affection-progress';
                    resultProgress.style.width = `${results.affectionScore}%`;
                } else if (resultType === 'infatuation') {
                    progressClass = 'infatuation-progress';
                    resultProgress.style.width = `${results.infatuationScore}%`;
                } else {
                    progressClass = 'friendship-progress';
                    resultProgress.style.width = `${results.friendshipScore}%`;
                }
                
                resultProgress.className = 'progress-bar';
                resultProgress.classList.add(progressClass);
            }, 100);
        }

        // Event listeners
        prevBtn.addEventListener('click', function() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        });

        nextBtn.addEventListener('click', function() {
            if (answers[currentQuestion] === null) {
                alert('Please select an answer before continuing.');
                return;
            }
            
            if (currentQuestion < selectedQuestions.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                showResults();
            }
        });

        restartBtn.addEventListener('click', initQuiz);

        // Theme toggle functionality
        themeToggle.addEventListener('click', function() {
            if (currentTheme === 'light') {
                document.body.classList.add('dark-mode');
                this.textContent = '‚òÄ Light Mode';
                currentTheme = 'dark';
            } else {
                document.body.classList.remove('dark-mode');
                this.textContent = 'üåô Dark Mode';
                currentTheme = 'light';
            }
        });

        // Create floating hearts
        function createFloatingHearts() {
            const floatingHearts = document.getElementById('floatingHearts');
            for (let i = 0; i < 15; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = '‚ù§';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.fontSize = (Math.random() * 20 + 10) + 'px';
                heart.style.animationDuration = (Math.random() * 10 + 10) + 's';
                heart.style.animationDelay = Math.random() * 10 + 's';
                floatingHearts.appendChild(heart);
            }
        }

        // Romantic cursor effect
        document.addEventListener('mousemove', function(e) {
            const cursor = document.createElement('div');
            cursor.className = 'romantic-cursor';
            cursor.innerHTML = '‚ù§';
            cursor.style.left = (e.pageX - 10) + 'px';
            cursor.style.top = (e.pageY - 10) + 'px';
            cursor.style.fontSize = (Math.random() * 10 + 15) + 'px';
            cursor.style.opacity = Math.random() * 0.5 + 0.3;
            document.body.appendChild(cursor);
            
            setTimeout(() => {
                cursor.style.transform = 'scale(2)';
                cursor.style.opacity = '0';
                setTimeout(() => cursor.remove(), 300);
            }, 100);
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            createFloatingHearts();
            initQuiz();
        });
    </script>
</body>
</html>